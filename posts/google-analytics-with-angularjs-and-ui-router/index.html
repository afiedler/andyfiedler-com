<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="description" content="Andy Fiedler&#x27;s Personal Site"/><title>Google Analytics with AngularJS and UI-Router</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/2ebc4650f8bf19a5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2ebc4650f8bf19a5.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-0d72f87c7081bf6b.js" defer=""></script><script src="/_next/static/chunks/main-c1f318e46964e3b2.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a8fa0b8d60e9233f.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-5774d63731fac027.js" defer=""></script><script src="/_next/static/J6OzeYXX0Nm8MlHPylglN/_buildManifest.js" defer=""></script><script src="/_next/static/J6OzeYXX0Nm8MlHPylglN/_ssgManifest.js" defer=""></script><script src="/_next/static/J6OzeYXX0Nm8MlHPylglN/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div id="main"><div class="max-w-screen-md mx-auto px-4"><div class="flex items-center justify-between py-6 lg:py-10"><a href="/" class="flex items-center"><p class="font-body font-bold text-2xl text-primary dark:text-white">Andy Fiedler</p></a><div class="flex items-center lg:hidden"><svg width="24" height="15" xmlns="http://www.w3.org/2000/svg" class="fill-current text-primary dark:text-white"><g fill-rule="evenodd"><rect width="24" height="3" rx="1.5"></rect><rect x="8" y="6" width="16" height="3" rx="1.5"></rect><rect x="4" y="12" width="20" height="3" rx="1.5"></rect></g></svg></div><div class="hidden lg:block"><ul class="flex items-center"><li class="mr-6 relative group mb-1"><div class="absolute left-0 bottom-0 w-full transition-all h-0 group-hover:h-2 group-hover:bg-yellow opacity-75 z-20"></div><a href="/posts" class="font-body font-medium text-lg text-primary dark:text-white group-hover:text-green dark:group-hover:text-secondary px-2 z-30 block relative transition-colors">Posts</a></li><li><i class="bx text-3xl text-primary dark:text-white cursor-pointer"></i></li></ul></div><div class="bg-black bg-opacity-80 fixed inset-0 z-20 flex opacity-0 pointer-events-none transition-opacity lg:hidden "><div class="ml-auto bg-blue-600 w-2/3 md:w-1/3 p-4"><svg viewBox="0 0 20 20" width="24" height="24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-white absolute top-0 right-0 mt-4 mr-4"><path d="M15.898,4.045c-0.271-0.272-0.713-0.272-0.986,0l-4.71,4.711L5.493,4.045c-0.272-0.272-0.714-0.272-0.986,0s-0.272,0.714,0,0.986l4.709,4.711l-4.71,4.711c-0.272,0.271-0.272,0.713,0,0.986c0.136,0.136,0.314,0.203,0.492,0.203c0.179,0,0.357-0.067,0.493-0.203l4.711-4.711l4.71,4.711c0.137,0.136,0.314,0.203,0.494,0.203c0.178,0,0.355-0.067,0.492-0.203c0.273-0.273,0.273-0.715,0-0.986l-4.711-4.711l4.711-4.711C16.172,4.759,16.172,4.317,15.898,4.045z"></path></svg><i class="absolute top-0 right-0 mt-4 mr-4"></i><ul class="flex flex-col mt-8"><li class=""><a href="/posts" class="font-body font-medium text-lg text-white px-2 block mb-3">Posts</a></li></ul></div></div></div></div><div class="max-w-screen-md mx-auto px-4"><div class="pt-16 lg:pt-20"><div class="border-b border-grey-lighter pb-8 sm:pb-12"><h2 class="font-body font-semibold text-primary dark:text-white text-3xl sm:text-4xl md:text-5xl block leading-tight">Google Analytics with AngularJS and UI-Router</h2><div class="flex items-center pt-5 sm:pt-8"><p class="font-body font-light text-primary dark:text-white pr-2">2015-07-29 12:54:59 -0400</p></div></div><article class="border-b border-grey-lighter py-8 sm:py-12 prose prose dark:prose-dark max-w-none"><p>I helped <a href="http://www.cleanslatedc.com/">Clean Slate DC</a> add Google Analytics to their app last night at <a href="http://codefordc.org">Code For DC</a> and realized others might not know how to do this. It's pretty simple, but you won't want to follow the directions on Google Analytics exactly. Instead, add this to your <code>index.html</code> or main page <code>&#x3C;head></code>, replacing your UA code with the UA code that Google gives you:</p>
<div><pre><code><span>&#x3C;!-- Google Analytics --></span>
<span><span><span>&#x3C;</span>script</span><span>></span></span><span><span>
<span>(</span><span>function</span><span>(</span><span>i<span>,</span>s<span>,</span>o<span>,</span>g<span>,</span>r<span>,</span>a<span>,</span>m</span><span>)</span><span>{</span>i<span>[</span><span>'GoogleAnalyticsObject'</span><span>]</span><span>=</span>r<span>;</span>i<span>[</span>r<span>]</span><span>=</span>i<span>[</span>r<span>]</span><span>||</span><span>function</span><span>(</span><span>)</span><span>{</span>
<span>(</span>i<span>[</span>r<span>]</span><span>.</span><span>q</span><span>=</span>i<span>[</span>r<span>]</span><span>.</span><span>q</span><span>||</span><span>[</span><span>]</span><span>)</span><span>.</span><span>push</span><span>(</span>arguments<span>)</span><span>}</span><span>,</span>i<span>[</span>r<span>]</span><span>.</span><span>l</span><span>=</span><span>1</span><span>*</span><span>new</span> <span>Date</span><span>(</span><span>)</span><span>;</span>a<span>=</span>s<span>.</span><span>createElement</span><span>(</span>o<span>)</span><span>,</span>
m<span>=</span>s<span>.</span><span>getElementsByTagName</span><span>(</span>o<span>)</span><span>[</span><span>0</span><span>]</span><span>;</span>a<span>.</span><span>async</span><span>=</span><span>1</span><span>;</span>a<span>.</span><span>src</span><span>=</span>g<span>;</span>m<span>.</span><span>parentNode</span><span>.</span><span>insertBefore</span><span>(</span>a<span>,</span>m<span>)</span>
<span>}</span><span>)</span><span>(</span><span>window</span><span>,</span><span>document</span><span>,</span><span>'script'</span><span>,</span><span>'//www.google-analytics.com/analytics.js'</span><span>,</span><span>'ga'</span><span>)</span><span>;</span>
<span>ga</span><span>(</span><span>'create'</span><span>,</span> <span>'UA-XXXX-X'</span><span>,</span> <span>'auto'</span><span>)</span><span>;</span>
</span></span><span><span><span>&#x3C;/</span>script</span><span>></span></span>
<span>&#x3C;!-- End Google Analytics --></span>
</code></pre></div>
<p>Next, add a service to your Angular project:</p>
<div><pre><code>angular<span>.</span><span>module</span><span>(</span><span>"app"</span><span>)</span><span>.</span><span>service</span><span>(</span><span>'Analytics'</span><span>,</span> <span>function</span><span>(</span><span>)</span> <span>{</span>

  <span>this</span><span>.</span><span>recordPageview</span> <span>=</span> <span>function</span><span>(</span><span>url</span><span>)</span> <span>{</span>
    <span>ga</span><span>(</span><span>'set'</span><span>,</span> <span>'page'</span><span>,</span> url<span>)</span><span>;</span>
    <span>ga</span><span>(</span><span>'send'</span><span>,</span> <span>'pageview'</span><span>)</span><span>;</span>
  <span>}</span><span>;</span>

<span>}</span><span>)</span><span>;</span>
</code></pre></div>
<p>Finally, add a run block near where your app starts:</p>
<div><pre><code>angular<span>.</span><span>module</span><span>(</span><span>"app"</span><span>)</span><span>.</span><span>run</span><span>(</span><span>function</span><span>(</span><span>$rootScope<span>,</span> $<span>location</span><span>,</span> <span>Analytics</span></span><span>)</span> <span>{</span>
  $rootScope<span>.</span><span>$on</span><span>(</span><span>'$stateChangeSuccess'</span><span>,</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>Analytics</span><span>.</span><span>recordPageview</span><span>(</span>$<span>location</span><span>.</span><span>url</span><span>(</span><span>)</span><span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
</code></pre></div>
<p>There you go!</p>
</article></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"google-analytics-with-angularjs-and-ui-router","contentHtml":"\u003cp\u003eI helped \u003ca href=\"http://www.cleanslatedc.com/\"\u003eClean Slate DC\u003c/a\u003e add Google Analytics to their app last night at \u003ca href=\"http://codefordc.org\"\u003eCode For DC\u003c/a\u003e and realized others might not know how to do this. It's pretty simple, but you won't want to follow the directions on Google Analytics exactly. Instead, add this to your \u003ccode\u003eindex.html\u003c/code\u003e or main page \u003ccode\u003e\u0026#x3C;head\u003e\u003c/code\u003e, replacing your UA code with the UA code that Google gives you:\u003c/p\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan\u003e\u0026#x3C;!-- Google Analytics --\u003e\u003c/span\u003e\n\u003cspan\u003e\u003cspan\u003e\u003cspan\u003e\u0026#x3C;\u003c/span\u003escript\u003c/span\u003e\u003cspan\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e\n\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003efunction\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003ei\u003cspan\u003e,\u003c/span\u003es\u003cspan\u003e,\u003c/span\u003eo\u003cspan\u003e,\u003c/span\u003eg\u003cspan\u003e,\u003c/span\u003er\u003cspan\u003e,\u003c/span\u003ea\u003cspan\u003e,\u003c/span\u003em\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e{\u003c/span\u003ei\u003cspan\u003e[\u003c/span\u003e\u003cspan\u003e'GoogleAnalyticsObject'\u003c/span\u003e\u003cspan\u003e]\u003c/span\u003e\u003cspan\u003e=\u003c/span\u003er\u003cspan\u003e;\u003c/span\u003ei\u003cspan\u003e[\u003c/span\u003er\u003cspan\u003e]\u003c/span\u003e\u003cspan\u003e=\u003c/span\u003ei\u003cspan\u003e[\u003c/span\u003er\u003cspan\u003e]\u003c/span\u003e\u003cspan\u003e||\u003c/span\u003e\u003cspan\u003efunction\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e{\u003c/span\u003e\n\u003cspan\u003e(\u003c/span\u003ei\u003cspan\u003e[\u003c/span\u003er\u003cspan\u003e]\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003eq\u003c/span\u003e\u003cspan\u003e=\u003c/span\u003ei\u003cspan\u003e[\u003c/span\u003er\u003cspan\u003e]\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003eq\u003c/span\u003e\u003cspan\u003e||\u003c/span\u003e\u003cspan\u003e[\u003c/span\u003e\u003cspan\u003e]\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003epush\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003earguments\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e}\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003ei\u003cspan\u003e[\u003c/span\u003er\u003cspan\u003e]\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003el\u003c/span\u003e\u003cspan\u003e=\u003c/span\u003e\u003cspan\u003e1\u003c/span\u003e\u003cspan\u003e*\u003c/span\u003e\u003cspan\u003enew\u003c/span\u003e \u003cspan\u003eDate\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003ea\u003cspan\u003e=\u003c/span\u003es\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003ecreateElement\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003eo\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e\nm\u003cspan\u003e=\u003c/span\u003es\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003egetElementsByTagName\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003eo\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e[\u003c/span\u003e\u003cspan\u003e0\u003c/span\u003e\u003cspan\u003e]\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003ea\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003easync\u003c/span\u003e\u003cspan\u003e=\u003c/span\u003e\u003cspan\u003e1\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003ea\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003esrc\u003c/span\u003e\u003cspan\u003e=\u003c/span\u003eg\u003cspan\u003e;\u003c/span\u003em\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003eparentNode\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003einsertBefore\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003ea\u003cspan\u003e,\u003c/span\u003em\u003cspan\u003e)\u003c/span\u003e\n\u003cspan\u003e}\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003ewindow\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e\u003cspan\u003edocument\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e\u003cspan\u003e'script'\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e\u003cspan\u003e'//www.google-analytics.com/analytics.js'\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e\u003cspan\u003e'ga'\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003e\n\u003cspan\u003ega\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e'create'\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003e'UA-XXXX-X'\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003e'auto'\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan\u003e\u003cspan\u003e\u0026#x3C;/\u003c/span\u003escript\u003c/span\u003e\u003cspan\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan\u003e\u0026#x3C;!-- End Google Analytics --\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNext, add a service to your Angular project:\u003c/p\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003eangular\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003emodule\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e\"app\"\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003eservice\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e'Analytics'\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003efunction\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e \u003cspan\u003e{\u003c/span\u003e\n\n  \u003cspan\u003ethis\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003erecordPageview\u003c/span\u003e \u003cspan\u003e=\u003c/span\u003e \u003cspan\u003efunction\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003eurl\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e \u003cspan\u003e{\u003c/span\u003e\n    \u003cspan\u003ega\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e'set'\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003e'page'\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e url\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003e\n    \u003cspan\u003ega\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e'send'\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003e'pageview'\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003e\n  \u003cspan\u003e}\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003e\n\n\u003cspan\u003e}\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eFinally, add a run block near where your app starts:\u003c/p\u003e\n\u003cdiv\u003e\u003cpre\u003e\u003ccode\u003eangular\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003emodule\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e\"app\"\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003erun\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003efunction\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e$rootScope\u003cspan\u003e,\u003c/span\u003e $\u003cspan\u003elocation\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003eAnalytics\u003c/span\u003e\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e \u003cspan\u003e{\u003c/span\u003e\n  $rootScope\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003e$on\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e'$stateChangeSuccess'\u003c/span\u003e\u003cspan\u003e,\u003c/span\u003e \u003cspan\u003efunction\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e \u003cspan\u003e{\u003c/span\u003e\n    \u003cspan\u003eAnalytics\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003erecordPageview\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e$\u003cspan\u003elocation\u003c/span\u003e\u003cspan\u003e.\u003c/span\u003e\u003cspan\u003eurl\u003c/span\u003e\u003cspan\u003e(\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003e\n  \u003cspan\u003e}\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003e\n\u003cspan\u003e}\u003c/span\u003e\u003cspan\u003e)\u003c/span\u003e\u003cspan\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThere you go!\u003c/p\u003e\n","layout":"post","status":"publish","published":true,"title":"Google Analytics with AngularJS and UI-Router","author":{"display_name":"afiedler","login":"afiedler","email":"andy@andyfiedler.com","url":""},"author_login":"afiedler","author_email":"andy@andyfiedler.com","wordpress_id":337,"wordpress_url":"http://andyfiedler.com/?p=337","date":"2015-07-29 12:54:59 -0400","date_gmt":"2015-07-29 16:54:59 -0400","categories":["Scrapbook"],"tags":["angularjs","google-analytics"]}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"google-analytics-with-angularjs-and-ui-router"},"buildId":"J6OzeYXX0Nm8MlHPylglN","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
{"pageProps":{"postData":{"id":"using-jupyter-for-exploring-a-heroku-database","contentHtml":"<p>If you want to establish a connection to a Heroku database and import data into Jupyter for some analysis, here's some boilerplate to help:</p>\n<div class=\"remark-highlight\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Python 3</span>\n<span class=\"token keyword\">from</span> sqlalchemy <span class=\"token keyword\">import</span> create_engine\n<span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n<span class=\"token keyword\">import</span> subprocess\n\nDATABASE_URL <span class=\"token operator\">=</span> subprocess<span class=\"token punctuation\">.</span>check_output<span class=\"token punctuation\">(</span><span class=\"token string\">\"heroku config:get DATABASE_URL --app &#x3C;your heroku app name here>\"</span><span class=\"token punctuation\">,</span> shell<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\nengine <span class=\"token operator\">=</span> create_engine<span class=\"token punctuation\">(</span>DATABASE_URL<span class=\"token punctuation\">)</span>\n\nresult <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_sql_query<span class=\"token punctuation\">(</span>\n    <span class=\"token triple-quoted-string string\">'''</span>\n<span class=\"token triple-quoted-string string\">SELECT * FROM my_table;</span>\n<span class=\"token triple-quoted-string string\">    '''</span><span class=\"token punctuation\">,</span>\n    con<span class=\"token operator\">=</span>engine<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>Now you have <code>result</code>, which is a Pandas DataFrame. Happy data exploration!</p>\n<p><strong>Note:</strong> It probably goes without saying this is a <strong>bad idea</strong> to do on a production system. You should use a read-only replica for running queries in production, or use a dump of the database loaded onto another server.</p>\n","layout":"post","status":"publish","published":true,"title":"Using Jupyter for Exploring a Heroku Database","author":{"display_name":"afiedler","login":"afiedler","email":"andy@andyfiedler.com","url":""},"author_login":"afiedler","author_email":"andy@andyfiedler.com","wordpress_id":370,"wordpress_url":"http://andyfiedler.com/?p=370","date":"2016-03-25 14:59:45 -0400","date_gmt":"2016-03-25 18:59:45 -0400","categories":["tech-notes"],"tags":["python","jupyter","pandas"]}},"__N_SSG":true}
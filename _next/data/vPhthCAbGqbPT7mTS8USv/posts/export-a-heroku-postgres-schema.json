{"pageProps":{"postData":{"id":"export-a-heroku-postgres-schema","contentHtml":"<p>This is a quick script to export just the schema from a Heroku Postgres database. It exports the schema with no ownership information, so you can easily load it into a local database.</p>\n<div><pre><code><span>#!/usr/bin/env ruby</span>\n<span>require</span> <span>'uri'</span>\ndb <span>=</span> <span>URI</span><span>(</span>`heroku config<span>:get</span> <span>DATABASE_URL</span>`<span>)</span>\nsystem<span>(</span><span>\"export PGPASSWORD=<span><span>#{</span>db<span>.</span>password<span>}</span></span>; \"</span> <span>+</span>\n       <span>\"pg_dump --schema-only -h <span><span>#{</span>db<span>.</span>host<span>}</span></span> -p <span><span>#{</span>db<span>.</span>port<span>}</span></span> \"</span> <span>+</span>\n       <span>\"-U <span><span>#{</span>db<span>.</span>user<span>}</span></span> -d <span><span>#{</span>db<span>.</span>path<span>.</span>gsub<span>(</span><span>'/'</span><span>,</span><span>''</span><span>)</span><span>}</span></span> --no-owner -f schema.sql\"</span><span>)</span>\n</code></pre></div>\n<p>Make sure you run this script from a folder within your app (with the Heroku git remote correctly set up). It will put the schema in schema.sql in the current working directory.</p>\n","layout":"post","status":"publish","published":true,"title":"Export a Heroku Postgres Schema","author":{"display_name":"afiedler","login":"afiedler","email":"andy@andyfiedler.com","url":""},"author_login":"afiedler","author_email":"andy@andyfiedler.com","wordpress_id":342,"wordpress_url":"http://andyfiedler.com/?p=342","date":"2015-09-10 13:58:45 -0400","date_gmt":"2015-09-10 17:58:45 -0400","categories":["Scrapbook"],"tags":["postgres","heroku"]}},"__N_SSG":true}
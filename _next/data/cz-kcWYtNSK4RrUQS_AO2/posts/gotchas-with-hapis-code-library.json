{"pageProps":{"postData":{"id":"gotchas-with-hapis-code-library","contentHtml":"<p>Overall, I've had a good experience with HapiJS and Code, Hapi's assertion library. There was one gotcha with Code's <code>deep.equal</code> function. If you are comparing two objects that have identical non-function properties, but different function properties, <code>deep.equal</code> will fail. So, for example, if you compare a Hapi response to a Plain Old Javascript Object fixture, you will get an exception.</p>\n<p>The solution is to strip the non-function properties before comparing:</p>\n<div><pre><code><span>// response - an object with some function properties</span>\n<span>// fixture - a Plain Old Javascript Object</span>\n<span>var</span> responsePojo <span>=</span> <span>JSON</span><span>.</span><span>parse</span><span>(</span><span>JSON</span><span>.</span><span>stringify</span><span>(</span>response<span>)</span><span>)</span><span>;</span>\n\n<span>expect</span><span>(</span>responsePojo<span>)</span><span>.</span><span>to</span><span>.</span><span>deep</span><span>.</span><span>equal</span><span>(</span>fixture<span>)</span><span>;</span>\n</code></pre></div>\n","layout":"post","status":"publish","published":true,"title":"Gotchas with Hapi's Code Library","author":{"display_name":"afiedler","login":"afiedler","email":"andy@andyfiedler.com","url":""},"author_login":"afiedler","author_email":"andy@andyfiedler.com","wordpress_id":327,"wordpress_url":"http://andyfiedler.com/?p=327","date":"2015-07-22 10:06:32 -0400","date_gmt":"2015-07-22 14:06:32 -0400","categories":["Scrapbook"],"tags":["nodejs","hapi"]}},"__N_SSG":true}